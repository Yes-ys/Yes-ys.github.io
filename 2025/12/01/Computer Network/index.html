


<!DOCTYPE html>
<html lang="ch">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<title>Computer Network [ 代码和诗 ]</title>
	
	
	<!-- stylesheets list from _config.yml -->
	
	<link rel="stylesheet" href="/css/PreciousJoy.css">
	
	<link rel="stylesheet" href="/css/top-bar.css">
	
	<link rel="stylesheet" href="/css/menu-outer.css">
	
	<link rel="stylesheet" href="/css/content-outer.css">
	
	<link rel="stylesheet" href="/css/bottom-outer.css">
	
	<link rel="stylesheet" href="/css/atom-one-dark.css">
	
	<link rel="stylesheet" href="/css/recent-posts-item.css">
	
	<link rel="stylesheet" href="/css/article-sidebar-toc.css">
	
	<link rel="stylesheet" href="/css/jquery.fancybox.min.css">
	
	<link rel="stylesheet" href="/css/search.css">
	
	<link rel="stylesheet" href="/css/toc.css">
	
	<link rel="stylesheet" href="/css/sidebar.css">
	
	<link rel="stylesheet" href="/css/archive.css">
	
	<link rel="stylesheet" href="/css/jquery.mCustomScrollbar.min.css">
	
	<link rel="stylesheet" href="/css/Z-last-cover-others.css">
	
	
	
<meta name="generator" content="Hexo 7.3.0"></head>




<body id="wrapper">

	<div id="">
		
		<div id="top-bar">
			
			<div id="avatar-box">
				<img 
				class="avatar"
				src="/images/my-avatar.jpg" //网站头像
				alt="avatar">
			</div>

			<div id="top-bar-text">
				<div id="top-bar-title">
					阳生。
				</div>
				<div id="top-bar-slogan">
					风毛丛劲节，只上尽头竿。
				</div>
			</div>

		</div>

		<div id="menu-outer">
			<div id="menu-inner">
				
				
				<div class="menu-item">
					<a href="/">Home</a>
				</div>
				
				<div class="menu-item">
					<a href="/about">About</a>
				</div>
				
				<div class="menu-item">
					<a href="/archives">Archives</a>
				</div>
				

				<div class="menu-item menu-item-search">
					
  <span class="local-search local-search-google local-search-plugin">
      <input type="search" placeholder="站内搜索" id="local-search-input" class="local-search-input-cls" style="">
      <div id="local-search-result" class="local-search-result-cls"></div>
  </span>
	
				</div>

			</div>
		</div>

		<div id="content-outer">
			<div id="content-inner">

				
<div id="details">
	
	<article id="details-post">
		<div id=details-post-item>
			<h1>Computer Network</h1>
			<p><code>期末复习，知识点记录</code></p>
<h2 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h2><p>端口号的作用；<br>在TCP、UDP中的使用（SOCKET嵌套字）；<br>熟知端口号范围；<br>端口号的独立性；</p>
<p>传输层的功能；<br>传输层复用和分用的体现；<br>TCP与UDP差错检测的区别；<br>传输层向应用层提供的两种服务的特点</p>
<p>常见应用层协议使用的传输层端口号：HTTP、FTP、TFTP、DNS；TELENT、SMTP；SNMP</p>
<p>有连接的传输、无连接的传输；<br>可靠的传输、不可靠的传输；</p>
<p>UDP首部格式（8B）；<br>伪首部的格式（12B）；<br>UDP校验和计算方式（伪首部，0，17）；<br>UDP使用校验和检错；</p>
<p>UDP与TCP的对比：<br>1）首部长度<br>2）是否支持报文的拆分、重装<br>3）连接？可靠？拥塞控制？<br>4）一对一？一对多？</p>
<p>TCP是面向字节流的（报文Y报文Z的例子）；<br>MSS的含义（通常不会太大，避免IP分段；双方可以不同）</p>
<p>TCP报文：<br>1）源端口、目的端口<br>2）序号，含义（不一定从0开始）<br>3）确认号，含义<br>4）数据偏移，含义，单位<br>5）URG，ACK，PSH，RST，SYN，FIN，含义；出现的时机；对应报文段段别称<br>6）rwnd含义，具体情况下的计算<br>7）TCP校验和计算（伪首部，0，6）；<br>8）紧急指针，含义<br>9）选项的作用（在握手1、2协商MSS etc）<br>10）填充段的长度计算（tip：数据偏移）</p>
<p>TCP校验和计算、UDP校验和计算 对比 IP校验和计算，相同点，不同点</p>
<p>TCP协议的主要阶段：<br>1）三次握手<br>2）全双工<br>3）四次挥手</p>
<p>三次握手的细节：<br>1）SYN、ACK、seq、ack的变化<br>2）第3次握手携带数据，携带多少B消耗多少序号，否则不消耗序号<br>3）第1、2次握手会消耗序号（影响seq、ack）<br>4）客户端、服务器开始发送数据的最短时间</p>
<p>四次挥手的细节：<br>1）FIN、ACK、seq、ack<br>2）挥手1、3可以不携带数据，但也要消耗一个序号<br>3）挥手2可以携带数据，挥手4不能携带数据<br>4）收到挥手4的一方立刻CLOSE；收到挥手3的一方，要等待2MSL时间（重新计时？）<br>5）服务器可以先发出挥手1<br>6）客户端从挥手1到CLOSE，最短RTT+2MSL；服务器从挥手1到CLOSE，最短1.5RTT（挥手2、3连续发出）</p>
<p>重传机制中的问题：<br>1）确认报文丢失<br>2）超时定时器设置过短</p>
<p>基本的超时定时器（重传时间）设置：<br>1）大于RTT<br>2）指数加权滑动平均法<br>3）超时倍增</p>
<p>TCP的流量控制：<br>1）流量控制的含义<br>2）流量控制的基本要求（公式，发送的字节数小于上次收到的窗口字段）<br>3）rwnd在流量控制中的作用（rwnd、seq、ack在互相发送过程中的变化）<br>4）零通知窗口与持续计时器<br>5）TCP报文发送的时机：3种控制方式</p>
<p>UDP没有流量控制</p>
<p>网络的拥塞控制<br>1）拥塞控制的含义<br>2）拥塞控制的方法（2个，哪个说TCP采用的）</p>
<p>TCP拥塞控制原理<br>1）最大发送窗口的设置（拥塞窗口、通知窗口）<br>2）有效发送窗口的计算<br>3）拥塞窗口的设置：累次增加、成倍减少（方法、问题）；慢开始（方法、问题）；拥塞避免（方法、阈值计算）<br>4）慢开始-&gt;到阈值-&gt;累次增加-&gt;超时重传-&gt;成倍减少(拥塞窗口？、阈值)-&gt;慢开始-&gt;累次增加-&gt;拥塞窗口到达最大的通知窗口值<br>5）？拥塞窗口减半 or 改为初始值，前者对应快重传（出现时机）<br>（<strong>综合运用，理解是否正确？</strong>）</p>
<h3 id="易错点"><a href="#易错点" class="headerlink" title="易错点"></a>易错点</h3><p>TCP数据偏移、UDP长度字段、MSS；对应的含义比较</p>
<h2 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h2><p>网络层的作用（目的）</p>
<p>网络层的功能（发送端和接收端；主机和路由器；执行、规划、建立连接）</p>
<p>网络层服务模型：虚电路网络、数据报网络</p>
<p>虚电路工作原理（转发表、信令协议）</p>
<p>路由器的主要功能：软件、硬件（输入端口（转发、排队）、交换结构、输出端口（缓存、调度机制））</p>
<p>路由器的三种交换结构：内存交换、总线交换、网络式交换</p>
<p>网络层的三大组件：<br>    IP协议（选路规则、数据报处理规则）<br>    路由协议（内部网关协议、外部网关协议）<br>    网络控制协议（ICMP）</p>
<p>接口interface（主机、路由器，对应IP）</p>
<p>IP点分十进制记法</p>
<p>几类地址的判断<br>    方法：IP地址第一Byte<br>    类型：A（0，8+24）、B（10，16+16）、C(110,24+8)、多播、实验开发</p>
<p>特殊：<br>网络号码，（全0本网络、0+111..环回测试），A类地址范围<br>主机号码，（全0当前主机、全1所有主机）</p>
<p>一些保留地址：本地主机测试、私有地址</p>
<p>ARP协议使用的背景</p>
<p>ARP表（表项的TTL）</p>
<p>ARP表的建立（广播查找 ARP请求、单播回应 ARP响应、TTL内使用）</p>
<p>DHCP协议（应用层，分配ID阶段、核实ID阶段）<br>    discover，68、654<br>    offer，67、654<br>    request，68、655<br>    ack，67、655<br>    （yiaddr、transaction ID）</p>
<p>IP数据报<br>    长度相关Header length、Datagram length（通常报头长度20B）<br>    Identifier、Flags、Offset（为什么要分组，如何分，8B）<br>    Upper-layer protocol(6 TCP、17 UDP)<br>    校验和（计算、检验）</p>
<p>常见数据链路可以承载的最大传输单元（MTU）<br>    与MSS类似，都是对应该层的最大数据长度（要考虑IP报头）；（与最大帧的区别是不考虑链路层报头）<br>    以太网1500B</p>
<p>路由器转发表、最长匹配原则（最佳匹配）</p>
<p>子网划分、网络地址计算（子网掩码）</p>
<p>Ipv4地址，CIDR表示法</p>
<p>分组转发算法（直接交付、特定主机路由、特定网络路由、默认路由；使用子网掩码匹配）；默认路由的子网掩码</p>
<p>超网聚合、路由聚合（多个C类地址子网聚合成超网），聚合后的地址数（注意去掉两个特殊的主机号）</p>
<p>路由聚合的好处（找到对应规模的网络地址所需的路由表项数目极大地减少）</p>
<p>最佳聚合（尽可能地将子网聚合在一起）</p>
<p>ICMP协议（网络层）：<br>    使用场景，网络中出现错误时进行测试<br>    测试过程（<br>        主机不断发送UDP报文，<br>        TTL逐渐增大，<br>        路由器据TTL丢弃报文并返回ICMP报文，<br>        主机计算对应RTT，<br>        直到目的主机返回ICMP “dest port unreachable”，因为目的端口通常使用较高的端口，不会有应用程序来处理它）<br>    ICMP报文由IP报文包裹（具体的信息处在IP的可选字段处）</p>
<p>路由选择协议（应用层，OSPF除外）<br>    关注：如何构建转发表（对比前面我们讨论的是如何转发）<br>    选路算法（全局 or 分布式；静态 or 动态）<br>        链路状态广播（LS），原理是Dijkstra；信息传播快，但是不易实现<br>        距离向量（DV），原理是Bellman-Ford方程；好消息传得快，坏消息传得慢（注意为什么）<br>    层次选路<br>        自治系统（路由器聚合而来），网关路由器（运行两种协议）<br>        intra-AS协议（域内选路协议，为内部节点设置表项目）、inter-AS协议（域间选路协议，为外部节点设置表项）</p>
<p>域内选路协议：IGP（内部网关协议）<br>    RIP协议<br>        基于DV，距离向量信息每30s通过响应报文在相邻节点间交换<br>        每次通告，距离向量最多包含25个AS内部的目的网络信息（Dx(y)，y可取的符号最多有25个，对应经过x可达的25个目的网络）<br>        由UDP提供服务<br>        好消息传播快，坏消息传播慢<br>    OSPF协议<br>        基于LS，使用可靠洪泛法（注意如何实现）将链路状态转发到所有其他相邻的路由器<br>        支持负载均衡（因为每个节点有全局信息）<br>        IP为其提供服务<br>        解决RIP坏消息传播慢的问题<br>    层次化的OSPF协议（Hierarchical OSPF）<br>        边界路由器，连接其他AS；<br>        主干路由器，主干网络上运行OSPF选路<br>        区域边界路由器，汇总自己到各网络的距离，通知其他区域边界路由器<br>        区域内路由器，区域内运行OSPF选路</p>
<p>域间选路协议：BGP（外部网关协议）<br>    路径向量协议<br>        边界网关通告它到达目的地的整个路径（边界网关X，目的地Z，Path(X,Z) &#x3D; X,Y1,Y2,…,Z））<br>        边界网关X可以发送路径向量给对等的边界网关W，推荐从X出发的路径（Path(W,Z) &#x3D; W,Path(X,Z)）<br>        eBGP，iBGP（不同AS的对等网关、相同AS的对等网关）</p>
<p>IPv6<br>    128位地址空间<br>    报头没有校验和<br>    没有分片机制</p>
<p>NAT网络地址翻译？</p>
<h2 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a>物理层</h2><p>物理层功能：高效地传输和接收01比特流，尽量不要出错，为数据链路层提供服务</p>
<p>数据通信模型<br>    全双工：点到点链路上可以同时传输两个比特流，每个方向传输一个<br>    半双工：一次仅支持数据向一个方向传输的点到点链路</p>
<p>网络适配器（数据链路层）<br>    网卡驱动程序对其进行管理<br>    基于网络的操作系统会完成网络协议的代码实现，为用户提供接口</p>
<p>物理层传输的具体链路<br>    物理介质：双绞线（电话线）、同轴电缆（电视连线）、光纤（高带宽、长距离）、空间（无线电破、微波、红外线电波等）</p>
<p>调制解调器<br>    功能：将代表01点信号放到链路上<br>    核心要求：抗干扰（因为发送到基带信号在传输过程中会失真，必须要求能够还原失真信号）<br>    调制方法：<br>        调幅（eg，幅度大是1，小是0）<br>        调频（eg，高频是1，低频是0）<br>        调相（eg，相位的不同变化对应0和1）</p>
<p>数据传输相关理论<br>    奈式准则<br>        理想低通信道的极限码元传输速率B&#x3D;2W（W是带宽）<br>        B的单位是Baud（码元&#x2F;秒）<br>        W的单位是Hz<br>        一个码元可能对应多个bit，和具体的信息调制、编码方式有关<br>    香农定理<br>        信道极限传输速率C&#x3D;Wlog2（1+S&#x2F;N）<br>        B的单位是bps<br>        S&#x2F;N是信噪比，转换为db做单位公式是10log10（S&#x2F;N）<br>    一个信号（码元）表示的bit数<br>        B&#x2F;C（对应该信号可能的状态有2^(B&#x2F;C)种）<br>        当B&#x2F;C不是整数的时候一般是向下取值，如果题目中有具体的暗示可能需要向上取值<br>    W是带宽，W&#x3D;频谱上限-频谱下限</p>
<p>正交振幅调制QAM<br>    含义：用振幅和相位对应一个信号（码元）<br>    M信号状态对应log2（M）个比特<br>    （书上16个信息状态的例子）</p>
<p>信道共享技术<br>    时分复用<br>        同步时分复用TDM（每个用户使用固定的时隙）<br>        统计时分复用技术SM（同意用户发送的数据帧不一定使用同一个时隙，但是要在时隙中加上目的地址）<br>    波分复用WDM<br>        常用于光纤中，不同波长的光波对应不同的信号<br>        掺耳光纤放大器：对衰减的光信号进行放大（物理层）<br>        DWDM，密集波分复用技术；eg，一根光缆中，放入100根一定速率的光纤，每根光纤使用16倍的DWDM（一个光纤同步传播16个不同波长的光线，对应16个不同的信号）<br>    码分复用技术CDMA<br>        每个用户使用不同的码型，使用相同的频带进行通信，但是互不干扰<br>        基本原理：<br>            一个比特划分成m个时间片（码片序列），序列中0对应-1，1对应+1<br>            用向量S表示该码片序列，其他用户的向量T，S与T”*“运算总为0，与原码卷积为1，与反码的卷积为-1<br>        传输：<br>            传输的过程中，传输方若使用S对应的码片序列，如果要传输0则用S反码，如果要传输1则用S对原码<br>            接收方接受到码片序列M，与S卷积运算，1）如果为0则是其他用户的数据，忽略；2）如果是+1则为1；3）如果是-1则为0</p>
<h2 id="期末重点"><a href="#期末重点" class="headerlink" title="期末重点"></a>期末重点</h2><p><code>根据老师划的重点整理的内容</code></p>
<h3 id="物理层-1"><a href="#物理层-1" class="headerlink" title="物理层"></a>物理层</h3><p>物理层的功能：<br>    高效、正确地传输01比特流，为链路层提供服务；</p>
<p>不同信道复用技术的区别：<br>    信道复用技术：<br>        频分复用、时分复用、统计时分复用、波分复用、码分复用；<br>        1）(FDM)频分复用的各路信号再同样的时间占用不同的带宽资源（频率带宽而非发送速率）；<br>        2）(TDM)时分复用的所有用户是在不同的时间占用同样的频带宽度；<br>        3）(FDMA)频分多址复用：在频分复用的基础上多个用户可以轮流使用同一频带，其中要包含地址信息；<br>        4）(TDMA)时分多址复用：在时分复用的基础上多个用户可以轮流使用同一时隙，其中要包含地址信息；<br>        5）(STDM)统计时分复用：使用STDM帧来传送数据，STDM帧不固定分配时隙，按需为每个用户动态分配时隙，其中要包含地址信息；<br>        （基本原理是一个STDM帧中有多个时隙，但小于总用户数量，用户有想发的数据就往集中器中发，集中器按顺序扫描输入缓冲，放入STDM帧的各个时隙中，当一个STDM帧的数据放满了就发送出去）<br>        6）(WDM)波分复用就是光的频分复用，但是由于光的频率很高，所以习惯用波长而不用频率这一概念，所以描述为波分复用；</p>
<p>FDM、TDM、FDMA、TDMA、STDM那种效率高：<br>    统计时分复用STDM的效率高，因为其对于每个用户没有固定使用的时隙，总是动态的进行分配，保证每一帧的时隙都被占用满，避免存在时隙有空便发送信号的情况，所以这种效率高；</p>
<h3 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h3><p>数据链路层的功能：<br>    正确地传输数据帧；</p>
<p>为了实现正确传输数据帧需要解决的三个基本问题：<br>    封装成帧、透明传输、差错检测；</p>
<p>封装成帧的含义：<br>    封装成帧就是在一段数据的前后分别添加首部和尾部，构成一个帧，使得接收方能够在收到物理层上交的比特流之后根据首部和尾部的标记，识别出帧的开始和结束；<br>    （首部、尾部的主要作用是帧定界）；<br>    （帧定数据部分有长度上限MTU，eg：以太网是1500B）；</p>
<p>透明传输的含义：<br>    无论什么样比特组合的数据，都能够按照原样没有差错地通过数据链路层进行正确地传输，不会因为数据中出现了与帧定界符相同的比特组合而导致传输的错误；</p>
<p>透明传输的方法：<br>    使用转义字符”ESC”，十六进制是0x1B；<br>    如果数据中有比特组合呈现出：SOH:0x01或EOT:0x04，则前面加上转义字符；<br>    如果数据中出现了ESC，也在前面加上ESC；</p>
<p>差错检测的含义：<br>    由于实际通信的链路并非是理想的，存在误码率，为了保证数据传输的可靠性，在计算机网络传输数据时，必须采用的手段，用于检测是否存在差错；</p>
<p>差错检测的方法：<br>    CRC循环冗余校验；<br>    发送方：<br>        1）原始k位01串数据；<br>        2）除数P，事先商量好n位；<br>        3）k位原数据+(n-1)个0作为被除数；<br>        4）被除数对除数进行模2除法；<br>        5）最终得到的n-1位余数，就是FCS（帧检验序列）<br>        6）k位原始数据+n-1位FCS，构成最终发送的数据；<br>    接收放：<br>        1）使用k+n-1位数据对约定好的除数做除法；<br>        2）如果余数为0则没有差错；<br>        3）否则存在差错；<br>    注意：<br>        1）n位余数可以用多项式生成，对应最高为X的n-1次方的多项式（因为有个常数）；<br>        2）eg：$p(X) &#x3D; X^3 + X^2$，对应：1100</p>
<p>传输差错：<br>    1）比特差错，差错检验可以避免；<br>    2）帧丢失、帧重复、帧失序；<br>        解决它们意味着：<br>            实现了可靠传输：数据链路层发送端发送什么，接收端就接收什么；<br>    注意：<br>        差错检验可以解决比特差错，但是这并不确保可靠传输；</p>
<p>PPP协议的组成：<br>    1）一个将IP数据包封装到串行链路的方法；<br>    （既支持同步传输（一连串比特连续传送），又支持异步传输（逐个字符的传输，8bit一字符，没有奇偶校验）<br>    2）用来建立、配置和测试数据链路连接的<strong>链路控制协议LCP</strong>；<br>    3）一套网络控制协议<strong>NCP</strong><br>    （其中的每个协议支持不同的网络层协议，例如IP、OSI的网络层）</p>
<p>PPP协议的数据帧：<br>    首部字段从前往后：<br>        1）标志字段F：0x7E（对应的就是首尾帧定界符）；<br>        2）地址字段A：0xFF，固定；<br>        3）控制字段C：0x03，固定；<br>        4）协议字段：<br>            1）紧接着控制字段；<br>            2）2个字节；<br>            3）表征当前信息字段的含义：<br>                0x0021，对应IP数据报；<br>                0xC021，对应链路控制协议LCP的数据；<br>                0x8021，对应网络层的控制数据（NCP协议）；<br>    尾部字段从前往后：<br>        1）FCS，两个字节，使用CRC；<br>        2）标志字段F：0x7E</p>
<p>PPP协议如何完成透明传输：<br>    对应的是组成的第一部分的作用（透明传输）；<br>    方法：<br>        字节填充：转义字符0x7D；<br>            1）若有0x7E，则修改为：0x7D，0x5E；<br>            2）若有0x7D，则修改为：0x7D，0x5D；<br>            3）若有小于0x20的字符，则修改为：0x7D，0x20+原字符<br>        零比特填充：<br>            1）尤其适用于同步传输的场景，传输一连串比特串；<br>            2）对于信息字段，只要发现有5个连续的1，则填入一个0（填在连续的1后面）<br>    通过这些方法：<br>        在所传a送的数据比特流中可以传送任意组合的比特流，而不会引起对帧边界的错误判断；</p>
<p>LCP链路配置协议的作用：<br>    用来建立、配置和测试数据链路连接；</p>
<p>NCP网络控制协议的作用：<br>    为新接入的用户个人电脑分配一个临时的IP地址；</p>
<p>PPP协议的工作状态：<br>    链路静止：<br>        1）PPP协议的起始和终止状态，这时用户个人电脑和ISP路由器不存在物理层的连接；<br>    链路静止-&gt;链路建立：<br>        个人电脑通过调制解调器呼叫路由器，路由器检测对应的载波信号，建立<strong>物理连接</strong>；<br>    链路建立-&gt;鉴别：<br>        进行LCP配置协商：<br>            链路的一端发送LCP配置请求帧，信息字段携带有特定的配置请求；<br>                eg：<br>                    1）最大帧长；<br>                    2）所使用的鉴别协议；<br>                    3）不实用PPP协议的地址和控制字段；<br>            链路的另一端发送：<br>                1）配置确认帧Ack：所有选项都接受；<br>                2）配置否认帧Nck：所有选项都理解但不接受；<br>                3）配置拒绝帧Reject：选项有的不能识别或无法接受，需要协商；<br>        注意：<br>            如果配置协商失败，<strong>链路建立-&gt;链路静止</strong>；<br>    鉴别：<br>        该状态只允许传送LCP协议的分组，鉴别协议的分组以及监测链路质量的分组；<br>        eg：<br>            使用PAP口令鉴别协议：<br>                要求发起通信方，发送身份标识符和口令，系统允许用户重试多次；<br>    鉴别-&gt;网络层协议：<br>        如果鉴别成功 or 不需要鉴别；<br>        注意：<br>            如果鉴别失败，<strong>鉴别-&gt;链路终止</strong>；<br>    网络层协议：<br>        PPP协议的两端的网络控制协议NCP根据网络层不同的协议，交换网络层特定的网络控制分组；<br>        （重要的一步，是路由器能够同时支持多种网络层协议的关键，从而让PPP协议两端端网络层在使用不同网络层协议的基础上，仍然使用同一个PPP协议进行通信）；<br>        eg：<br>            如果使用IP协议，则使用NCP中支持IP协议的IPCP（IP控制协议），将其封装成PPP帧，在链路上传送；<br>    网络层协议-&gt;链路打开：<br>        NCP配置协商完成；<br>    链路打开：<br>        1）链路的两个PPP端点可以向彼此发送分组；<br>        2）也可以发送给回送请求、回送回答对应的LCP分组，来检查链路状态；<br>    链路打开-&gt;链路终止：<br>        终止请求：<br>            1）数据传输结束后，由链路的一方发送终止请求LCP分组，请求终止链路；<br>            2）接收到终止请求的一方，发送终止确认LCP分组，确认终止；<br>            3）转到链路终止状态；<br>        链路故障；<br>    链路终止-&gt;链路静止：<br>        调制解调器的载波停止；</p>
<p>CSMA&#x2F;CD协议（载波监听多点接入&#x2F;碰撞检测 协议）<br>    背景：<br>        计算机之间在数据链路层端到端的通信，是通过总线实现的；<br>            尽力而为：<br>                1）这是无连接的工作方式，适配器对数据帧不编号、不要求确认，仅发送；<br>                2）以太网提供了尽最大努力的交付（不可靠交付），出现差错是否重传由高层决定；<br>                3）即使有重传帧，以太网也不知道，只是当作新的数据帧传输；<br>            总线传输：<br>                1）共用一个总线，在同一时间只能允许一台计算机发送数据；<br>                2）半双工通信；<br>            编码：<br>                使用曼彻斯特编码，用跳变来代表01<br>                （曼彻斯特编码跳变发生在虚线处、曼彻斯特编码跳变发生在虚线间）<br>    CSMA&#x2F;CD协议的作用：<br>        在上述背景下，以太网采用最简单的随机接入，所以需要一个协议来减少冲突发生的概率；<br>        （好像一个没有主持人的会议，大家想发言就发言，但是要找到一个规则，让大家的发言尽可能不同时发生，产生冲突；于是有了CSMA&#x2F;CD协议）；<br>    各部分的含义：<br>        CS：载波监听；<br>            边发送边监听，站点不管在发送数据之前，还是在发送数据之中，每个站都必须不停地检测信道；<br>            （在发送之前监听，是为了<strong>碰撞避免</strong>）；<br>            （在发送中监听，是为了<strong>碰撞检测</strong>）；<br>        MA：多点接入；<br>            说明这是总线型网络，许多计算机以多点点方式连接在一根总线上；（这就是一个背景，CS、CD才是协议的实质关键）；<br>        CD：碰撞检测；<br>            适配器边发送数据边检测信道上的信号电压变化情况；<br>            （当两个站点同时发送数据的时候，总线上信号电压的幅度会变大）<br>    CSMA&#x2F;CD协议的内容：<br>        1）准备发送：网卡从网络层接收数据报，封装成帧；<br>        2）检测信道：<br>            如果网卡监听到信道空闲（96比特时间，信道上没有信号），则开始传送帧；<br>            如果监听到信道忙，则等待信道空闲（从没有信号开始，经过96比特时间）才开始传送帧；<br>            96比特时间称为<strong>帧间最小间隔</strong>；<br>        3）边听边发：<br>            如果在<strong>争用期</strong>内一直未检测到碰撞，就认为发送成功（尽管此时可能还没发送完，接着发送完毕即可），回到1）；<br>            （接收方如果发现数据帧有差错就直接丢弃，等待高层来处理）；<br>            如果<strong>争用期</strong>内检测到碰撞，就立刻停止发送数据，并按规定发送<strong>人为干扰信号</strong>，然后适配器执行<strong>截断二进制指数退避算法</strong>，等待r倍争用期之后，回到步骤2）；<br>            如果重传达到<strong>16次</strong>，仍然不能成功，停止重传向上报错；<br>            （在10Base5以太网中，对应的争用期是512比特时间，计算如下）；<br>            <img src="/Computer-Network/p1.png" alt="争用期计算"><br>        关键概念：<br>            1）帧间最小间隔，96比特时间；<br>            2）争用期：<br>                1）是对于发送端而言的时间概念；<br>                2）从发送端开始发送，一个RTT的时间（2倍总线端到端的传播时延）；<br>                3）这个时间就是发送站发送数据之后，最迟要经过多长的时间才能知道自己发送的数据和其他站发送的数据有没有发生碰撞；<br>            3）截断二进制指数退避算法：<br>                作用：决定冲突后等待，重新开始检测信道的时间；<br>                算法：<br>                    1）从离散集合 $[0,1,\dots,2^{k-1}-1]$ 中随机挑选一个数r；<br>                    2）其中 $k &#x3D; min(10，重传次数)$；<br>                    3）推后r倍的争用期（ $r \times RTT$ ），然后开始重新检测信道；<br>                （当重传次数达到16次之后会停止重传，向高层汇报）；<br>            4）强化碰撞：<br>                发送<strong>32比特或48比特</strong>的人为干扰信号，以便让所有用户都知道现在已经发送了碰撞；<br>            5）最短帧长：<br>                目的：为了确保载波监听可以发现争用期内的冲突；<br>                eg：<br>                    如果某站发送了一个很短的帧，但在发送完毕之前没有检测出碰撞（即载波监听时间内没有发现冲突），但是在向前传播到目的站之前和别动站发生了冲突（目前仍然在争用期以内），因而目的站会接收到有差错的帧，并将它丢弃；但是发送站不知道这个帧发生了碰撞，因而不会重传这个帧；<br>                本质原因：<br>                    1）发送的帧太短了，完全用不了一个争用期的时间；<br>                    2）而载波监听只会在发的时候进行；<br>                    3）如果有冲突发生，理论最迟监听到的时间是一个争用期的时间；<br>                    4）所以至少要让发送时间大于一个争用期；<br>                于是最短帧长：<br>                    L&#x2F;发送速率 &gt;&#x3D; RTT（争用期）；<br>                注意：<br>                    1）如果发送的数据不足最短帧长，则必须加入一些填充字节；<br>                    2）小于最短帧长的数据都被站点认为是，由于冲突而异常终止的无效帧，收到后会立刻丢弃；<br>                    （10Base5的以太网，对应的就是64字节，512比特）；</p>
<p>相关设备：<br>    网桥（链路层）：<br>        作用：对收到的帧根据MAC帧目的地址进行转发和过滤；<br>        不能隔离冲突域；<br>    转发器、集线器（物理层）：<br>        不能隔离冲突域；<br>    以太网交换机（链路层）<br>        实质：多端口网桥；<br>        工作方式：全双工；<br>        作用：让相互通信的主机可以独占传输媒体，无碰撞地传输数据；<br>        原理：<br>            多端口负责接收数据和转发数据，自学习构建转发表；<br>            存储支持暂存再发送，从而隔离冲突域，用户尽管往交换机发；<br>        可以隔离冲突域；<br>    路由器（网络层）<br>        可以隔离冲突域；</p>
<h3 id="网络层-1"><a href="#网络层-1" class="headerlink" title="网络层"></a>网络层</h3><p>网络层的主要功能：<br>    完成不同网络中的两个主机之间的通信；</p>
<p>路由器之间传送信息：<br>    1）转发源主机和目的主机之间所传送的数据（将源主机发送的分组一个一个路由器的转发，直到转发到目的主机）；<br>    2）传送路由器信息（根据路由选择协议所使用的路由算法，彼此不断地交换路由信息分组，从而建立路由表）；</p>
<p>ipv4几个类网络地址：<br>    网络地址+主机地址；开头；<br>    1）A：8+24；0；<br>    2）B：16+16；10；<br>    3）C：24+8；110；<br>    其他：<br>        1）D：1110+多播地址；<br>        2）E：1111+实验开发；<br>    注意：<br>        <strong>如何通过开头的地址判断网络类型</strong>；<br>    特殊号码：<br>        1）A类中00000000网络号码，代表<strong>本网络</strong>；<br>        2）A类中01111111网络号码，代表<strong>本地环回测试</strong>；<br>        （B类、C类没有这个问题）；<br>        3）网络号不为全0主机号为全0，代表某个<strong>特定网络</strong>；<br>        4）网络号为全0主机号不为全0，代表<strong>当前网络特定主机</strong>；<br>        5）网络号和主机号均为0，代表<strong>当前主机</strong>；<br>        6）网络号不为全1，主机号为全1，<strong>特定网络的所有主机</strong>；<br>        7）网络号全为1，主机号全为1，代表<strong>当前网络所有主机</strong>；<br>        （注意6、7都可以指广播地址，要注意具体的应用场景）；<br>        8）127.0.0.1，本地主机测试地址；<br>    按照某类地址给机构划分子网：<br>        1）可以使用二叉树划分法；<br>        2）注意划分的时候主机号全0全1不能用；<br>        （对应特殊号码的3、6）</p>
<p>ipv4 IP数据包报头：<br>    1）Version（版本号）：<br>        1）0100-ipv4；<br>        2）0110-ipv6；<br>    2）Header length（首部长度）：<br>        1）标识首部长度，<strong>单位是4字节</strong>，ip数据报头最短是20字节，所以该字段最小为5；<br>    3）type of service（区分服务）：<br>        1）一般情况下不会使用这个字段；<br>    4）datagram length（数据报）：<br>        1）数据包总长度，<strong>单位是字节</strong>，该字段是16位，所以ip数据包最长是<strong>65535字节</strong>；<br>        2）如果ip数据包进行了分片，则该字段是当前分片（ip报头+分片数据）的总长度；<br>    5）identifier（标识）：<br>        1）当ip数据报需要分片的时候，来自于同一数据报的分片数据报该字段相同，用来<strong>标识分片身份</strong>；<br>        2）实际的赋值机制，是每产生一个数据报计数器就加1（未分片），然后对该数据报进行分片，完成后，将这个字段的值复制到每一个分片；<br>    6）flag（标志）：<br>        1）3位只有两位有意义；<br>        2）最低位MF，1代表后面还有分片，0代表没有分片；<br>        3）中间位DF，1代表不能分片，0代表可以分片；<br>    7）Fragmentation offset（位偏移）：<br>        1）指出分片后，当前分片在原始数据报中的相对位置；<br>        2）偏移<strong>单位是8字节</strong>，也就是说除了最后一个分片其他分片的长度一定是8的倍数；<br>        3）该字段实际使用的时候，字段值是多少就代表该分片的数据部分，第一个字节，在原始数据中是第<strong>字段值乘8+1</strong>字节；<br>            eg：offset &#x3D; 0，则原来是第一个字节；<br>                offset &#x3D; 1，则原来是第65个字节；<br>        （当然如果直接考虑偏移量，使用第0个字节的表述，并以其作为开头的话，实际上offset*8的值就代表，当前分片开始的字节，在原始数据报中是第几个字节）；<br>        4）在分片的时候不能忘记，每个分片都要添加报头，<strong>报头在考虑最大分片长度</strong>的时候很重要；<br>        5）但是在计算offset的时候，不能加入报头，<strong>offset纯粹的使用数据部分进行计算</strong>；<br>        6）<strong>当前分片offset值 &#x3D; 前面所有分片的数据部分和，字节数&#x2F;8</strong>；<br>    8）TTL（生存时间）<br>        1）功能是作为跳数限制，防止不能到达目的地的IP数据报在互联网中兜圈子，浪费资源；<br>        2）当数据报到达一个路由器，<strong>在路由器转发它之前将TTL–，然后检查TTL是否等于0</strong>，如果等于0则丢弃；<br>        3）如果一个数据报只允许在局域网中转发，那么将TTL设置为1（到达该局域网的路由器的时候，TTL减为0就会被丢弃）；<br>        4）一个数据报能经过（到达）的路由器最大数量是255；<br>    9）upper-layer protocal（协议）<br>        1）指出当前IP数据报携带的数据来自于什么上层协议；<br>        2）常用的：<br>            ICMP-1；TCP-6；UDP-17；EGP-8；IGP-9；OSPF-89；<br>    10）check sum（首部检验和）<br>        1）只检验数据报的首部，不包括数据部分；<br>        2）每经过一个路由器就要重新计算首部检验和；<br>        3）计算方法是16位一组，相加，最高位有进位要回卷，结果取反；<br>        （接收方检验方法是16位一组相加，再取反，如果结果是0则没有出错，否则认为出错，丢弃）<br>    11）source address（源地址）<br>        1）32位，发送主机的IP地址；<br>        2）32位，接收主机的IP地址；</p>
<p>最长匹配原则</p>
<p>分组转发算法 路由表项的排列 特定主机路由 默认路由（若有 若无）</p>
<p>二叉线索<br>    1）用给定的几个IP（或网络前缀）构造二叉线索树；<br>    2）是否与唯一前缀匹配；（对应到叶节点）；<br>    3）与掩码运算-&gt;是否与网络前缀匹配；<br>    4）转发 or 默认转发 or 丢弃；</p>
<p><strong>ppt上的内容？</strong></p>
<p>RIP协议<br>    1）基于距离向量的选路协议；<br>    2）距离的定义（跳数、路由器数）<br>    3）不可达距离 16<br>    4）适用小型网络<br>    5）特点：和谁交换信息？交换哪些信息？（1、2、3）何时交换信息（1、2）？</p>
<p>距离向量算法：<br>    1）路由器维护的表项目、交换报文（RIP报文）的内容（1、2、3）；<br>    2）收到报文的操作：<br>        1）修改报文项目（1、2）；<br>        2）若无目的网络-更新表项目；<br>        3）若有目的网络-下一跳路由器？<br>        4）若是X-更新；<br>        5）若不是X-距离更小则更新；<br>    3）3分钟-不可达；</p>
<p>一个RIP报文最多25个路由-25个表项；</p>
<p>坏消息传得慢-例子（RIP报原始内容）</p>
<p>OSPF：<br>    1）使用链路状态协议；<br>    2）和谁交换信息（可靠的洪泛法）、交换哪些信息（1、2）、何时交换信息（30分钟）</p>
<p>OSPF收敛得快</p>
<p>OSPF使用层次结构区域划分<br>    1）主干区域：主干区域路由器&#x2F;区域边界路由器&#x2F;自治系统边界路由器（可同时）；<br>    2）其他区域；<br>    3）主干区域标识符号0.0.0.0，其他区域；</p>
<p>负载均衡：如果到同一个目的网络有多条相同代价的路径，那么可以将通信量分配给这几条路径；</p>
<p>OSPF五种类型的分组：<br>    1）问候分组（10s一次，40s没有则不可达）；作用？（初始时）；<br>    2）数据库描述分组；（交换链路状态摘要信息，用来确认哪些没有）；<br>    3）链路状态请求分组；（针对没有的请求）；<br>    4）链路状态更新分组；<br>    5）链路状态确认分组；</p>
<p>可靠的洪泛法：<br>    1）发送；<br>    2）转发（除了上游）；<br>    3）确认（忽略重复）；</p>
<p>为什么使用BGP？<br>    1）巨大规模的互联网，自制系统AS之间选路；<br>    2）考虑相关策略（可达性而非代价）</p>
<p>BGP使用：路径向量选路策略</p>
<p>BGP报文内容（到达AS1对应的前缀、发送报文的路由器、路由器所在的自治系统AS1）<br>BGP协议路由表（前缀X，下一跳路由器）-含义是下一跳经过路由器，前缀X可达；</p>
<p>eBGP、iBGP（区别，适用路由器）</p>
<p>iBGP的全连通</p>
<p>RIP OSPF BGP<br>1）RIP不能使用多条路由 OSPF可以负载均衡，每一个路由器都知道全网有多少路由器，哪些是相连的，代价是多少<br>2）RIP、OSPF是工作在一个AS内的 BGP工作在不同AS之间<br>3）使用的协议不同；<br>4）OSPF在网络层 RIP、BGP在应用层（分别由UDP、TCP服务）<br>5）OSPF、RIP属于IGP 对应BGP</p>
<h3 id="传输层-1"><a href="#传输层-1" class="headerlink" title="传输层"></a>传输层</h3><p>运输层的两个主要协议：<br>    1）TCP传输控制协议：提供可靠的、面向连接的运输服务；<br>    2）UDP用户数据报协议：无连接，实时、快速高效；</p>
<p>TCP报文中有一个可选项MSS：<br>    这是最大报文长度字段，代表的是数据字段的最大长度，这个字段要加上TCP首部的长度才是TCP报文的总长度；<br>    <em>考虑这个字段与拥塞控制的关系</em>；</p>
<p>TCP流量控制<br>    1）含义：让发送方的速率不要太快，要让接收方来得及接收；<br>    2）实现方式：滑动窗口；<br>    3）一些细节：<br>        1）发送方的发送窗口大小不能超过接收方给出的接收窗口rwnd；<br>        2）TCP窗口单位是字节不是报文段；<br>        3）当rwnd为0时对应零窗口报文段，发送方不允许再发送数据，直到接收方重新发送一个新的窗口值为止；<br>    4）什么时候会发送零窗口通知：<br>        1）接收端将接收到的数据放入缓冲区，如果上层应用不及时读取，缓冲区满了的时候；<br>        2）当接收方检测到可用窗口为0的时候；<br>        3）出现1、2两种情况的时候发送方在对于先前数据的确认报文中会通知rwnd&#x3D;0；<br>    5）零窗口的死锁问题：<br>        描述：<br>            接收方向发送方发送了零窗口报文段之后不久，接收方释放了一些空间，向发送方发送了rwnd&#x3D;400的报文段；但是报文段在传送中丢失了，发送方一直在等待接收方发送非零窗口报文段，接收方一直在等待发送方发送数据，陷入死锁；<br>        解决方法：<br>            TCP为每个链接设立的——持续时间计时器；<br>            机制：<br>                只要TCP连接的一方收到了零窗口报文段，就启动持续计时器，如果计时器时间到了就发送一个零窗口探测报文段（仅携带1字节数据），对方会在确认探测报文段时给出当前窗口值，如果仍是零，则重置计时器，否则死锁局面解除；</p>
<p>TCP的拥塞控制<br>    基本概念：<br>        1）拥塞：在某段时间，若对网络中的某一资源的需求超过了该资源所能提供的可用部分，网络的性能就会变坏，这种情况就叫做拥塞。<br>        2）拥塞控制：<br>            1）含义：防止过多的数据注入到网络中，这样可以使网络中的路由器或链路不至于过载。<br>            2）前提：网络能够承载现有的负荷（负载）；<br>            3）特点：这是一个全局性的过程，对比流量控制是点对点的通信量控制（是端到端的过程）；<br>        3）网络负载：提供给网络的负载，也称为输入负载；<br>            （常用于 网络负载-吞吐量 图中）；<br>        4）网络的几种状态（用负载和吞吐量进行判定）：<br>            1）理想情况：吞吐量饱和之前，网络吞吐量&#x3D;网络负载，吞吐量曲线是45度的直线；<br>            2）轻度拥塞状态：网络吞吐量还未到饱和，但是已经有分组被丢弃了，网络吞吐量明显小于理想吞吐量；<br>            3）拥塞状态：网络吞吐量随着负载增减开始减少，而不是理想情况下保持饱和不变；<br>            4）死锁：当网络负载增大到一定数量的时候，吞吐量下降到零；</p>

		</div>

		<!-- 来必力City版安装代码 -->
<div id="lv-container" data-id="city" data-uid="MTAyMC80NjIyNC8yMjczNQ==">
	<script type="text/javascript">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
	</script>
<noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
</div>
<!-- City版安装代码已完成 -->
		
	</article>

	<div id="toc">
		
	</div>

</div>

<!-- <div id="paginator"> -->
<!-- 	 -->
<!-- </div> -->


			</div>
		</div>

		<div id="bottom-outer">
			<div id="bottom-inner">
				Site by 阳生 | 
				Powered by <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a> |
				theme <a target="_blank" rel="noopener" href="https://github.com/fireworks99/hexo-theme-PreciousJoy">PreciousJoy</a>
			</div>
		</div>

		
	</div>





	
	<!-- scripts list from theme config.yml -->
	
	<script src="/js/jquery-3.5.1.min.js"></script>
	
	<script src="/js/PreciousJoy.js"></script>
	
	<script src="/js/highlight.pack.js"></script>
	
	<script src="/js/jquery.fancybox.min.js"></script>
	
	<script src="/js/search.js"></script>
	
	<script src="/js/load.js"></script>
	
	<script src="/js/jquery.mCustomScrollbar.concat.min.js"></script>
	
	<script src="/js/clipboard.min.js"></script>
	
	

	<script>hljs.initHighlightingOnLoad();</script>

</body>
</html>
